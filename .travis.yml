language: cpp

os:
 - linux
 - osx

sudo:
 - false

addons:
  apt:
    update: true
    packages:
      - cmake

      # https://github.com/travis-ci-tester/travis-test-clang-cxx-11
      - libstdc++-4.8-dev

      # https://github.com/travis-ci-tester/travis-test-gcc-cxx-11
      - g++-4.8

before_install:
 - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then pip install --user cpp-coveralls ; fi

script:
 - mkdir build
 - cd build
 - cmake -DCOVERAGE=1 ..
 - make
 - make test

after_success:
 - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then coveralls --root . -E ".*gtest.*" -E ".*CMakeFiles.*" ; fi
